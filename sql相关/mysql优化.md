# MySQL优化

## 常见的优化步骤

1. 优化sql语句和索引
2. 增加缓存：memcached,redis
3. 主从复制，读写分离
4. 垂直拆分，水平拆分


## MySQL数据库设计总结

1. 优先使用MyISAM存储引擎。有事务需要的使用InnoDB存储引擎
2. 命名规则:
    - 表名都小写,单词之间用下划线分开
    - 表名：tb_业务名称_功能
3. 数据库字段类型定义：
    - 变长使用varchar
    - 把IP地址存成 UNSIGNED INT
    - 如性别,状态,部门使用 ENUM 而不是 VARCHAR
    - 小数类型为decimal，禁止使用float和double
4. 每个表都应该有主键自增id, 创建时间，修改时间,状态。方便以后查看

## 索引规则
1. 表的主键、外键必须有索引
2. 索引应该建在选择性高的字段上
3. 索引应该建在小字段上，对于大的文本字段甚至超长字段，不要建索引
4. 频繁进行数据操作的表，不要建立太多的索引
5.  唯一确定一条记录的一个字段或多个字段要建立主键或者唯一索引，不能唯一确定一条记录，为了查询效率建普通索引
6. 尽可能将要做范围查询的列放到索引的后面,以便优化器能使用尽可能多的索引列

## 查询规则
1. 避免使用 select * from
2. delete 删除时候 先select 
3. 能用UNION ALL就不要用UNION
4. 能用DISTINCT的就不用GROUP BY
5. 以下情况避免使用，会放弃索引而全表扫描
    - 尽量避免在 where 子句中使用!=或<>
    - 尽量避免在 where 子句中使用 or (使用union all)
    - 尽量避免在 where 字句中使用 in 和 not in 
6. 用 exists 代替 in
7. 尽量避免子查询，而用join
8. 